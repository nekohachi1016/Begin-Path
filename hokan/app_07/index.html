<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>バブルソートの可視化 - ミニアプリ保管庫</title><!--タイトル名忘れずに-->
        <link rel="stylesheet" href="../../assets/style.css">
        <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosansjp.css">
        <link rel="icon" href="../../assets/フィラメント付きの電球アイコン.png">
        <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    </head>
    <body>
        <main>
        <!--アプリ名-->
        <h1>バブルソートの可視化</h1>
        <!--説明文-->
        <p>
        ソートアルゴリズムの基本中の基本、バブルソートの動きを棒グラフでアニメーション表示したものです。
        </p>
        <br>
        <p>
            <a class="demo-link" href="demo.html" target="_blank">▶ 実行してみる</a>
        </p>
        <div class="tabs">
            <button onclick="showTab('html')">HTML</button>
            <button onclick="showTab('js')">JavaScript</button>
        </div>

        <div id="html" class="code-block active">
        <pre><code class="language-html">
        <!-- 以下にエスケープしたHTMLを貼る -->
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;
&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
        </code></pre>
        </div> 
        
        <!-- JavaScript -->
        <div id="js" class="code-block">
        <pre><code class="language-javascript">
        <!-- 以下にJavaScriptを貼る -->
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = 400;

let array = [];
const N = 100; // 要素数
for (let i = 0; i < N; i++) {
  array.push(Math.random());
}

let i = 0;
let j = 0;

function drawArray(arr, highlightA, highlightB) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const barWidth = canvas.width / arr.length;

  arr.forEach((val, index) => {
    const height = val * canvas.height;
    ctx.fillStyle = (index === highlightA || index === highlightB) ? "red" : "white";
    ctx.fillRect(index * barWidth, canvas.height - height, barWidth, height);
  });
}

function bubbleStep() {
  if (i < array.length) {
    if (j < array.length - i - 1) {
      if (array[j] > array[j + 1]) {
        [array[j], array[j + 1]] = [array[j + 1], array[j]]; // swap
      }
      drawArray(array, j, j + 1);
      j++;
    } else {
      j = 0;
      i++;
    }
  } else {
    drawArray(array); // 最後の状態
  }

  requestAnimationFrame(bubbleStep);
}

document.body.style.background = "black";
bubbleStep();
    
    
        </code></pre>
        </div>
        <br>

        <p>
            <a href="../" class="back-button">← 保管庫にもどる</a>
        </p>
        </main>
        <script>
        hljs.highlightAll();
        function showTab(lang) {
            document.querySelectorAll('.code-block').forEach(div => {
                div.classList.remove('active');
            });
            document.getElementById(lang).classList.add('active');
        }
        </script>
    </body>
</html>